% generated by Ott 0.28 from: rules.ott
\newcommand{\ottdrule}[4][]{{\displaystyle\frac{\begin{array}{l}#2\end{array}}{#3}\quad\ottdrulename{#4}}}
\newcommand{\ottusedrule}[1]{\[#1\]}
\newcommand{\ottpremise}[1]{ #1 \\}
\newenvironment{ottdefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]}{}
\newenvironment{ottfundefnblock}[3][]{ \framebox{\mbox{#2}} \quad #3 \\[0pt]\begin{displaymath}\begin{array}{l}}{\end{array}\end{displaymath}}
\newcommand{\ottfunclause}[2]{ #1 \equiv #2 \\}
\newcommand{\ottnt}[1]{\mathit{#1}}
\newcommand{\ottmv}[1]{\mathit{#1}}
\newcommand{\ottkw}[1]{\mathbf{#1}}
\newcommand{\ottsym}[1]{#1}
\newcommand{\ottcom}[1]{\text{#1}}
\newcommand{\ottdrulename}[1]{\textsc{#1}}
\newcommand{\ottcomplu}[5]{\overline{#1}^{\,#2\in #3 #4 #5}}
\newcommand{\ottcompu}[3]{\overline{#1}^{\,#2<#3}}
\newcommand{\ottcomp}[2]{\overline{#1}^{\,#2}}
\newcommand{\ottgrammartabular}[1]{\begin{supertabular}{llcllllll}#1\end{supertabular}}
\newcommand{\ottmetavartabular}[1]{\begin{supertabular}{ll}#1\end{supertabular}}
\newcommand{\ottrulehead}[3]{$#1$ & & $#2$ & & & \multicolumn{2}{l}{#3}}
\newcommand{\ottprodline}[6]{& & $#1$ & $#2$ & $#3 #4$ & $#5$ & $#6$}
\newcommand{\ottfirstprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottlongprodline}[2]{& & $#1$ & \multicolumn{4}{l}{$#2$}}
\newcommand{\ottfirstlongprodline}[2]{\ottlongprodline{#1}{#2}}
\newcommand{\ottbindspecprodline}[6]{\ottprodline{#1}{#2}{#3}{#4}{#5}{#6}}
\newcommand{\ottprodnewline}{\\}
\newcommand{\ottinterrule}{\\[5.0mm]}
\newcommand{\ottafterlastrule}{\\}
\newcommand{\ottmetavars}{
\ottmetavartabular{
 $ \mathit{var} ,\, \mathit{x} ,\, \mathit{n} ,\, \mathit{s} $ & \ottcom{term variable} \\
 $ \ottmv{index} ,\, \ottmv{j} $ &  \\
}}

\newcommand{\ottterminals}{
\ottrulehead{\ottnt{terminals}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \lambda }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \longrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Longrightarrow }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \emptyset }{}{}{}{}\ottprodnewline
\ottprodline{|}{ :_{n} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \land }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vdash }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \iota }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \delta }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \Gamma }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \kappa }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \kappa^{\alpha} }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbb{ C } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \mathbb{ R } }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \neq }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \equiv }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \vee }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \notin }{}{}{}{}\ottprodnewline
\ottprodline{|}{ \bot }{}{}{}{}}

\newcommand{\otte}{
\ottrulehead{\ottnt{e}}{::=}{\ottcom{expression}}\ottprodnewline
\ottfirstprodline{|}{\mathit{n}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{s}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{x[[}  \ottnt{e}  \ottsym{]]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{;}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{\}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{function(}  \overline{f}  \ottsym{)}  \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{x(}  \overline{a}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x}  \ottsym{<-}  \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x}  \ottsym{<<-}  \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{x[[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{]]}  \ottsym{<-}  \ottnt{e_{{\mathrm{2}}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{x[[}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{]]}  \ottsym{<<-}  \ottnt{e_{{\mathrm{2}}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{attr(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{attr(}  \ottnt{e_{{\mathrm{1}}}}  \ottsym{,}  \ottnt{e_{{\mathrm{2}}}}  \ottsym{)}  \ottsym{<-}  \ottnt{e_{{\mathrm{3}}}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{u}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\nu  \ottsym{(}  \overline{a}  \ottsym{)}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\mathbb{ C }  \ottsym{[}  \ottnt{e}  \ottsym{]}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\mathbb{ R }  \ottsym{[}  \ottnt{e}  \ottsym{]}} {\textsf{M}}{}{}{}}

\newcommand{\ottv}{
\ottrulehead{\nu}{::=}{}}

\newcommand{\ottlv}{
\ottrulehead{\overline{v}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\nu}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{v} \, \nu}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{[]}}{}{}{}{}}

\newcommand{\ottln}{
\ottrulehead{\overline{n}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathit{n}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{n} \, \overline{n}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{[]}}{}{}{}{}}

\newcommand{\ottls}{
\ottrulehead{\overline{s}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathit{s}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{s} \, \mathit{s}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{[]}}{}{}{}{}}

\newcommand{\ottf}{
\ottrulehead{\ottnt{f}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathit{x}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x}  \ottsym{=}  \ottnt{e}}{}{}{}{}}

\newcommand{\ottlf}{
\ottrulehead{\overline{f}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{[]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{f}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{f} \, \overline{f}}{}{}{}{}}

\newcommand{\otta}{
\ottrulehead{\ottnt{a}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x}  \ottsym{=}  \ottnt{e}}{}{}{}{}}

\newcommand{\ottla}{
\ottrulehead{\overline{a}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{[]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a} \, \overline{a}}{}{}{}{}}

\newcommand{\ottH}{
\ottrulehead{\ottnt{H}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\emptyset}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{H}  \ottsym{[} \, \iota \, \ottsym{/}  \ottnt{F}  \ottsym{]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{H}  \ottsym{[} \, \delta \, \ottsym{/}  \ottnt{e} \, \Gamma  \ottsym{]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{H}  \ottsym{[}  \nu_{\bot}  \ottsym{/}  \kappa^{\alpha}  \ottsym{]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{H}  \ottsym{[} \, \delta \, \ottsym{/}  \nu  \ottsym{]}}{}{}{}{}}

\newcommand{\ottattr}{
\ottrulehead{\alpha}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\nu_{\bot} \, \nu_{\bot}'}{}{}{}{}}

\newcommand{\ottvXXopt}{
\ottrulehead{\nu_{\bot}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\nu}{}{}{}{}\ottprodnewline
\ottprodline{|}{\bot}{}{}{}{}}

\newcommand{\ottu}{
\ottrulehead{\ottnt{u}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\delta}{}{}{}{}\ottprodnewline
\ottprodline{|}{\nu}{}{}{}{}}

\newcommand{\ottprimv}{
\ottrulehead{\kappa}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{num[}  \overline{n}  \ottsym{]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{str[}  \overline{s}  \ottsym{]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{gen[}  \overline{v}  \ottsym{]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\lambda  \overline{f}  \ottsym{.}  \ottsym{e,}  \Gamma}{}{}{}{}}

\newcommand{\ottprimvattr}{
\ottrulehead{\kappa^{\alpha}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{ \kappa ^{ \alpha } } {\textsf{M}}{}{}{}}

\newcommand{\ottF}{
\ottrulehead{\ottnt{F}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{[]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{F}  \ottsym{[}  \mathit{x}  \ottsym{/}  \ottnt{u}  \ottsym{]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{F}  \ottsym{[}  \mathit{x}  \ottsym{/} \, \bot \, \ottsym{]}}{}{}{}{}}

\newcommand{\ottG}{
\ottrulehead{\Gamma}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{[]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\iota \, \ottsym{*}  \Gamma}{}{}{}{}}

\newcommand{\ottS}{
\ottrulehead{\ottnt{S}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottsym{[]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e} \, \Gamma  \ottsym{*}  \ottnt{S}}{}{}{}{}}

\newcommand{\ottrr}{
\ottrulehead{\mathbb{ R }}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{\_\_}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \nu  \ottsym{;} \, \ottkw{\_\_} \, \ottsym{\}}}{}{}{}{}}

\newcommand{\ottcc}{
\ottrulehead{\mathbb{ C }}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottkw{\_\_}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x}  \ottsym{<-} \, \ottkw{\_\_}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{x[[} \, \ottkw{\_\_} \, \ottsym{]]}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{x[[}  \ottnt{e}  \ottsym{]]}  \ottsym{<-} \, \ottkw{\_\_}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{x[[} \, \ottkw{\_\_} \, \ottsym{]]}  \ottsym{<-}  \nu}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{\{} \, \ottkw{\_\_} \, \ottsym{;}  \ottnt{e}  \ottsym{\}}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{\{}  \nu  \ottsym{;} \, \ottkw{\_\_} \, \ottsym{\}}}{}{}{}{}}

\newcommand{\ottP}{
\ottrulehead{\ottnt{P}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e} \, \ottnt{P}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{[]}}{}{}{}{}}

\newcommand{\ottN}{
\ottrulehead{\ottnt{N}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathit{x}  \ottsym{=}  \ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x}  \ottsym{=}  \ottnt{e} \, \ottnt{N}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{N} \, \ottnt{N'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{[]}}{}{}{}{}}

\newcommand{\ottformula}{
\ottrulehead{\ottnt{formula}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{judgement}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{H}  \ottsym{(} \, \delta \, \ottsym{)}  \ottsym{=}  \ottnt{e} \, \Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{H}  \ottsym{(} \, \delta \, \ottsym{)}  \ottsym{=}  \nu}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{H}  \ottsym{(} \, \iota \, \ottsym{)}  \ottsym{=}  \ottnt{F}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{H}  \ottsym{(}  \nu_{\bot}  \ottsym{)}  \ottsym{=}  \kappa}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{H}  \ottsym{(}  \nu_{\bot}  \ottsym{)}  \ottsym{=}  \kappa^{\alpha}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{H}  \ottsym{(}  \nu  \ottsym{)}  \neq  \kappa}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{H}  \ottsym{=}  \ottnt{H'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{=}  \Gamma'}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{F}  \ottsym{=}  \ottnt{F'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma  \ottsym{(}  \ottnt{H}  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \ottnt{u}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\alpha  \ottsym{=}  \alpha'}{}{}{}{}\ottprodnewline
\ottprodline{|}{\iota \, \ottsym{(}  \ottnt{H}  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \ottnt{u}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\iota \, \ottkw{fresh}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\delta \, \ottkw{fresh}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\nu \, \ottkw{fresh}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{f}  \equiv  \ottnt{f'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{N}  \equiv  \ottnt{N'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{formula}  \vee  \ottnt{formula'}} {\textsf{M}}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x} \, \notin \, \ottnt{N}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathit{x} \, \notin \, \ottnt{F}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{cpy(}  \ottnt{H}  \ottsym{,}  \nu  \ottsym{)}  \ottsym{=}  \ottnt{H'}  \ottsym{,}  \nu'}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{assign(}  \mathit{x}  \ottsym{,}  \nu  \ottsym{,}  \Gamma  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottnt{H'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{readn(}  \nu  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=} \, \ottkw{m}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{get(}  \nu  \ottsym{,} \, \ottkw{m} \, \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \nu'  \ottsym{,}  \ottnt{H'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{set(}  \nu  \ottsym{,} \, \ottkw{m} \, \ottsym{,}  \nu'  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottnt{H'}}{}{}{}{}}

\newcommand{\ottRed}{
\ottrulehead{\ottnt{Red}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{S}  \ottsym{;}  \ottnt{H}  \Longrightarrow  \ottnt{S'}  \ottsym{;}  \ottnt{H'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e} \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \ottnt{e'}  \ottsym{;}  \ottnt{H'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \ottnt{u}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \ottsym{getfun(}  \ottnt{H'}  \ottsym{,}  \Gamma'  \ottsym{,}  \mathit{x'}  \ottsym{)}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{split(}  \overline{a}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N}  \ottsym{)}  \ottsym{=}  \ottnt{P'}  \ottsym{,}  \ottnt{N'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottkw{args} \, \ottsym{(}  \overline{f}  \ottsym{,}  \overline{a}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottsym{H)}  \ottsym{=}  \ottnt{F}  \ottsym{,}  \Gamma''  \ottsym{,}  \ottnt{H'}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottsym{args2}  \ottsym{(}  \overline{f}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottnt{F}  \ottsym{,}  \ottnt{H'}}{}{}{}{}}

\newcommand{\ottjudgement}{
\ottrulehead{\ottnt{judgement}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\ottnt{Red}}{}{}{}{}}

\newcommand{\ottuserXXsyntax}{
\ottrulehead{\ottnt{user\_syntax}}{::=}{}\ottprodnewline
\ottfirstprodline{|}{\mathit{var}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottmv{index}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{terminals}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{e}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\nu}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{v}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{n}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{s}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{f}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{f}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{a}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\overline{a}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{H}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\alpha}{}{}{}{}\ottprodnewline
\ottprodline{|}{\nu_{\bot}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{u}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\kappa}{}{}{}{}\ottprodnewline
\ottprodline{|}{\kappa^{\alpha}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{F}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\Gamma}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{S}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathbb{ R }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\mathbb{ C }}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{P}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{N}}{}{}{}{}\ottprodnewline
\ottprodline{|}{\ottnt{formula}}{}{}{}{}}

\newcommand{\ottgrammar}{\ottgrammartabular{
\ottterminals\ottinterrule
\otte\ottinterrule
\ottv\ottinterrule
\ottlv\ottinterrule
\ottln\ottinterrule
\ottls\ottinterrule
\ottf\ottinterrule
\ottlf\ottinterrule
\otta\ottinterrule
\ottla\ottinterrule
\ottH\ottinterrule
\ottattr\ottinterrule
\ottvXXopt\ottinterrule
\ottu\ottinterrule
\ottprimv\ottinterrule
\ottprimvattr\ottinterrule
\ottF\ottinterrule
\ottG\ottinterrule
\ottS\ottinterrule
\ottrr\ottinterrule
\ottcc\ottinterrule
\ottP\ottinterrule
\ottN\ottinterrule
\ottformula\ottinterrule
\ottRed\ottinterrule
\ottjudgement\ottinterrule
\ottuserXXsyntax\ottafterlastrule
}}

% defnss
% defns Red
%% defn reduce
\newcommand{\ottdruleexp}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{e} \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \ottnt{e'}  \ottsym{;}  \ottnt{H'}}%
}{
\mathbb{ C }  \ottsym{[}  \ottnt{e}  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H}  \Longrightarrow  \mathbb{ C }  \ottsym{[}  \ottnt{e'}  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H'}}{%
{\ottdrulename{exp}}{}%
}}


\newcommand{\ottdruleForceP}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{H}  \ottsym{(} \, \delta \, \ottsym{)}  \ottsym{=}  \ottnt{e} \, \Gamma'}%
}{
\mathbb{ C }  \ottsym{[}  \delta  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H}  \Longrightarrow  \ottnt{e} \, \Gamma'  \ottsym{*}  \mathbb{ C }  \ottsym{[}  \delta  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H}}{%
{\ottdrulename{ForceP}}{}%
}}


\newcommand{\ottdruleForceF}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \delta}%
}{
\mathbb{ C }  \ottsym{[}  \ottsym{x(}  \overline{a}  \ottsym{)}  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H}  \Longrightarrow  \delta \, \Gamma  \ottsym{*}  \mathbb{ C }  \ottsym{[}  \ottsym{x(}  \overline{a}  \ottsym{)}  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H}}{%
{\ottdrulename{ForceF}}{}%
}}


\newcommand{\ottdruleGetF}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \nu}%
}{
\mathbb{ C }  \ottsym{[}  \ottsym{x(}  \overline{a}  \ottsym{)}  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H}  \Longrightarrow  \delta \, \Gamma  \ottsym{*}  \mathbb{ C }  \ottsym{[}  \nu  \ottsym{(}  \overline{a}  \ottsym{)}  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H}}{%
{\ottdrulename{GetF}}{}%
}}


\newcommand{\ottdruleInvF}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{H}  \ottsym{(}  \nu  \ottsym{)}  \ottsym{=}  \lambda  \overline{f}  \ottsym{.}  \ottsym{e,}  \Gamma'}%
\ottpremise{\ottkw{args} \, \ottsym{(}  \overline{f}  \ottsym{,}  \overline{a}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottsym{H)}  \ottsym{=}  \ottnt{F}  \ottsym{,}  \Gamma''  \ottsym{,}  \ottnt{H'}}%
}{
\mathbb{ C }  \ottsym{[}  \nu  \ottsym{(}  \overline{a}  \ottsym{)}  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H}  \Longrightarrow  \ottnt{e} \, \Gamma''  \ottsym{*}  \mathbb{ C }  \ottsym{[}  \nu  \ottsym{(}  \overline{a}  \ottsym{)}  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H'}}{%
{\ottdrulename{InvF}}{}%
}}


\newcommand{\ottdruleRetP}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{H'}  \ottsym{=}  \ottnt{H}  \ottsym{[} \, \delta \, \ottsym{/}  \nu  \ottsym{]}}%
}{
\mathbb{ R }  \ottsym{[}  \nu  \ottsym{]} \, \Gamma'  \ottsym{*}  \mathbb{ C }  \ottsym{[}  \delta  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H}  \Longrightarrow  \mathbb{ C }  \ottsym{[}  \delta  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H'}}{%
{\ottdrulename{RetP}}{}%
}}


\newcommand{\ottdruleRetF}[1]{\ottdrule[#1]{%
}{
\mathbb{ R }  \ottsym{[}  \nu  \ottsym{]} \, \Gamma'  \ottsym{*}  \mathbb{ C }  \ottsym{[}  \nu_{{\mathrm{2}}}  \ottsym{(}  \overline{a}  \ottsym{)}  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H}  \Longrightarrow  \mathbb{ C }  \ottsym{[}  \nu  \ottsym{]} \, \Gamma  \ottsym{*}  \ottnt{S}  \ottsym{;}  \ottnt{H'}}{%
{\ottdrulename{RetF}}{}%
}}

\newcommand{\ottdefnreduce}[1]{\begin{ottdefnblock}[#1]{$\ottnt{S}  \ottsym{;}  \ottnt{H}  \Longrightarrow  \ottnt{S'}  \ottsym{;}  \ottnt{H'}$}{}
\ottusedrule{\ottdruleexp{}}
\ottusedrule{\ottdruleForceP{}}
\ottusedrule{\ottdruleForceF{}}
\ottusedrule{\ottdruleGetF{}}
\ottusedrule{\ottdruleInvF{}}
\ottusedrule{\ottdruleRetP{}}
\ottusedrule{\ottdruleRetF{}}
\end{ottdefnblock}}

%% defn ereduce
\newcommand{\ottdruleeexp}[1]{\ottdrule[#1]{%
}{
\ottnt{e} \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \ottnt{e'}  \ottsym{;}  \ottnt{H'}}{%
{\ottdrulename{eexp}}{}%
}}


\newcommand{\ottdruleNum}[1]{\ottdrule[#1]{%
\ottpremise{\nu \, \ottkw{fresh}}%
\ottpremise{\alpha  \ottsym{=}  \bot \, \bot}%
\ottpremise{\ottnt{H'}  \ottsym{=}  \ottnt{H}  \ottsym{[}  \nu  \ottsym{/}   \ottsym{num[}  \mathit{n}  \ottsym{]} ^{ \alpha }   \ottsym{]}}%
}{
\mathit{n} \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \nu  \ottsym{;}  \ottnt{H'}}{%
{\ottdrulename{Num}}{}%
}}


\newcommand{\ottdruleStr}[1]{\ottdrule[#1]{%
\ottpremise{\nu \, \ottkw{fresh}}%
\ottpremise{\alpha  \ottsym{=}  \bot \, \bot}%
\ottpremise{\ottnt{H'}  \ottsym{=}  \ottnt{H}  \ottsym{[}  \nu  \ottsym{/}   \ottsym{str[}  \mathit{s}  \ottsym{]} ^{ \alpha }   \ottsym{]}}%
}{
\mathit{s} \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \nu  \ottsym{;}  \ottnt{H'}}{%
{\ottdrulename{Str}}{}%
}}


\newcommand{\ottdruleFun}[1]{\ottdrule[#1]{%
\ottpremise{\nu \, \ottkw{fresh}}%
\ottpremise{\alpha  \ottsym{=}  \bot \, \bot}%
\ottpremise{\ottnt{H'}  \ottsym{=}  \ottnt{H}  \ottsym{[}  \nu  \ottsym{/}   \lambda  \overline{f}  \ottsym{.}  \ottsym{e,}  \Gamma ^{ \alpha }   \ottsym{]}}%
}{
\ottsym{function(}  \overline{f}  \ottsym{)}  \ottnt{e} \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \nu  \ottsym{;}  \ottnt{H'}}{%
{\ottdrulename{Fun}}{}%
}}


\newcommand{\ottdruleFind}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{(}  \ottnt{H}  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \ottnt{u}}%
}{
\mathit{x} \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \ottnt{u}  \ottsym{;}  \ottnt{H}}{%
{\ottdrulename{Find}}{}%
}}


\newcommand{\ottdruleGetP}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{H}  \ottsym{(} \, \delta \, \ottsym{)}  \ottsym{=}  \nu}%
}{
\delta \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \nu  \ottsym{;}  \ottnt{H'}}{%
{\ottdrulename{GetP}}{}%
}}


\newcommand{\ottdruleAss}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{cpy(}  \ottnt{H}  \ottsym{,}  \nu  \ottsym{)}  \ottsym{=}  \ottnt{H'}  \ottsym{,}  \nu'}%
\ottpremise{\Gamma  \ottsym{=}  \iota \, \ottsym{*}  \Gamma'}%
\ottpremise{\ottnt{H}  \ottsym{(} \, \iota \, \ottsym{)}  \ottsym{=}  \ottnt{F}}%
\ottpremise{\ottnt{F'}  \ottsym{=}  \ottnt{F}  \ottsym{[}  \mathit{x}  \ottsym{/}  \nu'  \ottsym{]}}%
\ottpremise{\ottnt{H''}  \ottsym{=}  \ottnt{H'}  \ottsym{[} \, \iota \, \ottsym{/}  \ottnt{F'}  \ottsym{]}}%
}{
\mathit{x}  \ottsym{<-}  \nu \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \nu  \ottsym{;}  \ottnt{H''}}{%
{\ottdrulename{Ass}}{}%
}}


\newcommand{\ottdruleDAss}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{cpy(}  \ottnt{H}  \ottsym{,}  \nu  \ottsym{)}  \ottsym{=}  \ottnt{H'}  \ottsym{,}  \nu'}%
\ottpremise{\Gamma  \ottsym{=}  \iota \, \ottsym{*}  \Gamma'}%
\ottpremise{\ottsym{assign(}  \mathit{x}  \ottsym{,}  \nu'  \ottsym{,}  \Gamma'  \ottsym{,}  \ottnt{H'}  \ottsym{)}  \ottsym{=}  \ottnt{H''}}%
}{
\mathit{x}  \ottsym{<<-}  \nu \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \nu  \ottsym{;}  \ottnt{H''}}{%
{\ottdrulename{DAss}}{}%
}}


\newcommand{\ottdruleGet}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{(}  \ottnt{H}  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \nu'}%
\ottpremise{\ottsym{readn(}  \nu  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=} \, \ottkw{m}}%
\ottpremise{\ottsym{get(}  \nu'  \ottsym{,} \, \ottkw{m} \, \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \nu''  \ottsym{,}  \ottnt{H'}}%
}{
\ottsym{x[[}  \nu  \ottsym{]]} \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \nu''  \ottsym{;}  \ottnt{H'}}{%
{\ottdrulename{Get}}{}%
}}


\newcommand{\ottdruleSetL}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{cpy(}  \ottnt{H}  \ottsym{,}  \nu'  \ottsym{)}  \ottsym{=}  \ottnt{H'}  \ottsym{,}  \nu''}%
\ottpremise{\Gamma  \ottsym{=}  \iota \, \ottsym{*}  \Gamma'}%
\ottpremise{\iota \, \ottsym{(}  \ottnt{H'}  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \nu'''}%
\ottpremise{\ottsym{readn(}  \nu  \ottsym{,}  \ottnt{H'}  \ottsym{)}  \ottsym{=} \, \ottkw{m}}%
\ottpremise{\ottsym{set(}  \nu'''  \ottsym{,} \, \ottkw{m} \, \ottsym{,}  \nu''  \ottsym{,}  \ottnt{H'}  \ottsym{)}  \ottsym{=}  \ottnt{H''}}%
}{
\ottsym{x[[}  \nu  \ottsym{]]}  \ottsym{<-}  \nu' \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \nu'  \ottsym{;}  \ottnt{H''}}{%
{\ottdrulename{SetL}}{}%
}}


\newcommand{\ottdruleSetG}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{cpy(}  \ottnt{H}  \ottsym{,}  \nu'  \ottsym{)}  \ottsym{=}  \ottnt{H'}  \ottsym{,}  \nu''}%
\ottpremise{\Gamma  \ottsym{=}  \iota \, \ottsym{*}  \Gamma'}%
\ottpremise{\ottnt{H'}  \ottsym{(} \, \iota \, \ottsym{)}  \ottsym{=}  \ottnt{F}}%
\ottpremise{\mathit{x} \, \notin \, \ottnt{F}}%
\ottpremise{\Gamma'  \ottsym{(}  \ottnt{H'}  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \nu'''}%
\ottpremise{\ottsym{cpy(}  \ottnt{H'}  \ottsym{,}  \nu'''  \ottsym{)}  \ottsym{=}  \ottnt{H''}  \ottsym{,}  \nu''''}%
\ottpremise{\ottnt{F'}  \ottsym{=}  \ottnt{F}  \ottsym{[}  \mathit{x}  \ottsym{/}  \nu''''  \ottsym{]}}%
\ottpremise{\ottnt{H'''}  \ottsym{=}  \ottnt{H''}  \ottsym{[} \, \iota \, \ottsym{/}  \ottnt{F'}  \ottsym{]}}%
\ottpremise{\ottsym{readn(}  \nu  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=} \, \ottkw{m}}%
\ottpremise{\ottsym{set(}  \nu''''  \ottsym{,} \, \ottkw{m} \, \ottsym{,}  \nu''  \ottsym{,}  \ottnt{H'''}  \ottsym{)}  \ottsym{=}  \ottnt{H''''}}%
}{
\ottsym{x[[}  \nu  \ottsym{]]}  \ottsym{<-}  \nu' \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \nu'  \ottsym{;}  \ottnt{H''''}}{%
{\ottdrulename{SetG}}{}%
}}


\newcommand{\ottdruleGetA}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{H}  \ottsym{(}  \nu  \ottsym{)}  \ottsym{=}   \kappa ^{ \alpha } }%
\ottpremise{\alpha  \ottsym{=}  \nu_{\bot} \, \nu_{\bot}'}%
\ottpremise{\texttt{\textcolor{red}{<<no parses (char 6): index(***v',v\_bot', H) = n >>}}}%
\ottpremise{\texttt{\textcolor{red}{<<no parses (char 7): get(v\_b***ot,n,h) = v'' >>}}}%
}{
\ottsym{attr(}  \nu  \ottsym{,}  \nu'  \ottsym{)} \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \nu''  \ottsym{;}  \ottnt{H}}{%
{\ottdrulename{GetA}}{}%
}}


\newcommand{\ottdruleReplA}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{H}  \ottsym{(}  \nu  \ottsym{)}  \ottsym{=}   \kappa ^{ \alpha } }%
\ottpremise{\alpha  \ottsym{=}  \nu_{\bot} \, \nu_{\bot}'}%
\ottpremise{\texttt{\textcolor{red}{<<no parses (char 6): index(***v',v\_opt',H) = n) >>}}}%
\ottpremise{\texttt{\textcolor{red}{<<no parses (char 7): set(v,n***,v'',H) = H' >>}}}%
}{
\ottsym{attr(}  \nu  \ottsym{,}  \nu'  \ottsym{)}  \ottsym{<-}  \nu'' \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \nu''  \ottsym{;}  \ottnt{H'}}{%
{\ottdrulename{ReplA}}{}%
}}


\newcommand{\ottdruleSetA}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{cpy(}  \ottnt{H}  \ottsym{,}  \nu''  \ottsym{)}  \ottsym{=}  \ottnt{H'}  \ottsym{,}  \nu'''}%
\ottpremise{\ottnt{H'}  \ottsym{(}  \nu  \ottsym{)}  \ottsym{=}   \kappa ^{ \nu_{\bot} \, \nu_{\bot}' } }%
\ottpremise{\texttt{\textcolor{red}{<<no parses (char 6): index(***v', v\_opt', H') = bottom >>}}}%
\ottpremise{\texttt{\textcolor{red}{<<no parses (char 6): reads(***v', H) = s >>}}}%
\ottpremise{\ottnt{H'}  \ottsym{(}  \nu_{\bot}  \ottsym{)}  \ottsym{=}   \ottsym{gen[}  \overline{v}  \ottsym{]} ^{ \alpha } }%
\ottpremise{\ottnt{H'}  \ottsym{(}  \nu_{\bot}'  \ottsym{)}  \ottsym{=}   \ottsym{str[}  \overline{s}  \ottsym{]} ^{ \alpha' } }%
\ottpremise{\ottnt{H''}  \ottsym{=}  \ottnt{H'}  \ottsym{[}  \nu_{\bot}  \ottsym{/}   \ottsym{gen[}  \overline{v} \, \nu'''  \ottsym{]} ^{ \alpha }   \ottsym{]}  \ottsym{[}  \nu_{\bot}'  \ottsym{/}   \ottsym{str[}  \overline{s} \, \mathit{s}  \ottsym{]} ^{ \alpha' }   \ottsym{]}}%
}{
\ottsym{attr(}  \nu  \ottsym{,}  \nu'  \ottsym{)}  \ottsym{<-}  \nu'' \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \nu''  \ottsym{;}  \ottnt{H''}}{%
{\ottdrulename{SetA}}{}%
}}


\newcommand{\ottdruleSetB}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{cpy(}  \ottnt{H}  \ottsym{,}  \nu''  \ottsym{)}  \ottsym{=}  \ottnt{H'}  \ottsym{,}  \nu_{{\mathrm{3}}}}%
\ottpremise{\ottnt{H'}  \ottsym{(}  \nu  \ottsym{)}  \ottsym{=}   \kappa ^{ \bot \, \bot } }%
\ottpremise{\nu_{{\mathrm{4}}} \, \ottkw{fresh}}%
\ottpremise{\nu_{{\mathrm{5}}} \, \ottkw{fresh}}%
\ottpremise{\texttt{\textcolor{red}{<<no parses (char 6): reads(***v', H') = s >>}}}%
\ottpremise{\ottnt{H''}  \ottsym{=}  \ottnt{H'}  \ottsym{[}  \nu_{{\mathrm{4}}}  \ottsym{/}   \ottsym{gen[}  \nu_{{\mathrm{3}}}  \ottsym{]} ^{ \bot \, \bot }   \ottsym{]}  \ottsym{[}  \nu_{{\mathrm{5}}}  \ottsym{/}   \ottsym{str[}  \mathit{s}  \ottsym{]} ^{ \bot \, \bot }   \ottsym{]}}%
}{
\ottsym{attr(}  \nu  \ottsym{,}  \nu'  \ottsym{)}  \ottsym{<-}  \nu'' \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \nu''  \ottsym{;}  \ottnt{H''}}{%
{\ottdrulename{SetB}}{}%
}}

\newcommand{\ottdefnereduce}[1]{\begin{ottdefnblock}[#1]{$\ottnt{e} \, \Gamma  \ottsym{;}  \ottnt{H}  \longrightarrow  \ottnt{e'}  \ottsym{;}  \ottnt{H'}$}{}
\ottusedrule{\ottdruleeexp{}}
\ottusedrule{\ottdruleNum{}}
\ottusedrule{\ottdruleStr{}}
\ottusedrule{\ottdruleFun{}}
\ottusedrule{\ottdruleFind{}}
\ottusedrule{\ottdruleGetP{}}
\ottusedrule{\ottdruleAss{}}
\ottusedrule{\ottdruleDAss{}}
\ottusedrule{\ottdruleGet{}}
\ottusedrule{\ottdruleSetL{}}
\ottusedrule{\ottdruleSetG{}}
\ottusedrule{\ottdruleGetA{}}
\ottusedrule{\ottdruleReplA{}}
\ottusedrule{\ottdruleSetA{}}
\ottusedrule{\ottdruleSetB{}}
\end{ottdefnblock}}

%% defn getfun
\newcommand{\ottdruleGetFun}[1]{\ottdrule[#1]{%
}{
\ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \ottnt{u}}{%
{\ottdrulename{GetFun}}{}%
}}


\newcommand{\ottdruleGetFOne}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{=}  \iota \, \ottsym{*}  \Gamma'}%
\ottpremise{\iota \, \ottsym{(}  \ottnt{H}  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \nu}%
\ottpremise{\ottnt{H}  \ottsym{(}  \nu  \ottsym{)}  \ottsym{=}  \lambda  \overline{f}  \ottsym{.}  \ottsym{e,}  \Gamma''}%
}{
\ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \nu}{%
{\ottdrulename{GetF1}}{}%
}}


\newcommand{\ottdruleGetFThree}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{=}  \iota \, \ottsym{*}  \Gamma'}%
\ottpremise{\iota \, \ottsym{(}  \ottnt{H}  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \delta}%
\ottpremise{\ottnt{H}  \ottsym{(} \, \delta \, \ottsym{)}  \ottsym{=}  \nu}%
\ottpremise{\ottnt{H}  \ottsym{(}  \nu  \ottsym{)}  \ottsym{=}  \lambda  \overline{f}  \ottsym{.}  \ottsym{e,}  \Gamma''}%
}{
\ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \nu}{%
{\ottdrulename{GetF3}}{}%
}}


\newcommand{\ottdruleGetFFour}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{=}  \iota \, \ottsym{*}  \Gamma'}%
\ottpremise{\iota \, \ottsym{(}  \ottnt{H}  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \delta}%
\ottpremise{\ottnt{H}  \ottsym{(} \, \delta \, \ottsym{)}  \ottsym{=}  \ottnt{e} \, \Gamma''}%
}{
\ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \delta}{%
{\ottdrulename{GetF4}}{}%
}}

\newcommand{\ottdefngetfun}[1]{\begin{ottdefnblock}[#1]{$\ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \ottnt{u}$}{}
\ottusedrule{\ottdruleGetFun{}}
\ottusedrule{\ottdruleGetFOne{}}
\ottusedrule{\ottdruleGetFThree{}}
\ottusedrule{\ottdruleGetFFour{}}
\end{ottdefnblock}}

%% defn getfun_eq
\newcommand{\ottdruleGetFTwo}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{=}  \iota \, \ottsym{*}  \Gamma'}%
\ottpremise{\iota \, \ottsym{(}  \ottnt{H}  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \nu}%
\ottpremise{\ottnt{H}  \ottsym{(}  \nu  \ottsym{)}  \neq  \lambda  \overline{f}  \ottsym{.}  \ottsym{e,}  \Gamma''}%
}{
\ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma'  \ottsym{,}  \mathit{x}  \ottsym{)}}{%
{\ottdrulename{GetF2}}{}%
}}


\newcommand{\ottdruleGetFFive}[1]{\ottdrule[#1]{%
\ottpremise{\Gamma  \ottsym{=}  \iota \, \ottsym{*}  \Gamma'}%
\ottpremise{\iota \, \ottsym{(}  \ottnt{H}  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \delta}%
\ottpremise{\ottnt{H}  \ottsym{(} \, \delta \, \ottsym{)}  \ottsym{=}  \nu}%
\ottpremise{\ottnt{H}  \ottsym{(}  \nu  \ottsym{)}  \neq  \lambda  \overline{f}  \ottsym{.}  \ottsym{e,}  \Gamma''}%
}{
\ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma'  \ottsym{,}  \mathit{x}  \ottsym{)}}{%
{\ottdrulename{GetF5}}{}%
}}

\newcommand{\ottdefngetfunXXeq}[1]{\begin{ottdefnblock}[#1]{$\ottsym{getfun(}  \ottnt{H}  \ottsym{,}  \Gamma  \ottsym{,}  \mathit{x}  \ottsym{)}  \ottsym{=}  \ottsym{getfun(}  \ottnt{H'}  \ottsym{,}  \Gamma'  \ottsym{,}  \mathit{x'}  \ottsym{)}$}{}
\ottusedrule{\ottdruleGetFTwo{}}
\ottusedrule{\ottdruleGetFFive{}}
\end{ottdefnblock}}

%% defn split_is
\newcommand{\ottdrulesplitOne}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{split(}  \overline{a}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N}  \ottsym{)}  \ottsym{=}  \ottnt{P'}  \ottsym{,}  \ottnt{N'}}%
}{
\ottsym{split(}  \mathit{x}  \ottsym{=}  \ottnt{e} \, \overline{a}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N}  \ottsym{)}  \ottsym{=}  \ottnt{P'}  \ottsym{,}  \mathit{x}  \ottsym{=}  \ottnt{e} \, \ottnt{N'}}{%
{\ottdrulename{split1}}{}%
}}


\newcommand{\ottdrulesplitTwo}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{split(}  \overline{a}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N}  \ottsym{)}  \ottsym{=}  \ottnt{P'}  \ottsym{,}  \ottnt{N'}}%
}{
\ottsym{split(}  \ottnt{e} \, \overline{a}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N}  \ottsym{)}  \ottsym{=}  \ottnt{e} \, \ottnt{P'}  \ottsym{,}  \ottnt{N'}}{%
{\ottdrulename{split2}}{}%
}}


\newcommand{\ottdrulesplitThree}[1]{\ottdrule[#1]{%
}{
\ottsym{split(}  \ottsym{[]}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N}  \ottsym{)}  \ottsym{=}  \ottnt{P}  \ottsym{,}  \ottnt{N}}{%
{\ottdrulename{split3}}{}%
}}

\newcommand{\ottdefnsplitXXis}[1]{\begin{ottdefnblock}[#1]{$\ottsym{split(}  \overline{a}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N}  \ottsym{)}  \ottsym{=}  \ottnt{P'}  \ottsym{,}  \ottnt{N'}$}{}
\ottusedrule{\ottdrulesplitOne{}}
\ottusedrule{\ottdrulesplitTwo{}}
\ottusedrule{\ottdrulesplitThree{}}
\end{ottdefnblock}}

%% defn args_is
\newcommand{\ottdruleArgs}[1]{\ottdrule[#1]{%
\ottpremise{\ottsym{split(}  \overline{a}  \ottsym{,}  \ottsym{[]}  \ottsym{,}  \ottsym{[]}  \ottsym{)}  \ottsym{=}  \ottnt{P}  \ottsym{,}  \ottnt{N}}%
\ottpremise{\iota \, \ottkw{fresh}}%
\ottpremise{\Gamma''  \ottsym{=}  \iota \, \ottsym{*}  \Gamma'}%
\ottpremise{\ottsym{args2}  \ottsym{(}  \overline{f}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma''  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottnt{F}  \ottsym{,}  \ottnt{H'}}%
\ottpremise{\ottnt{H''}  \ottsym{=}  \ottnt{H'}  \ottsym{[} \, \iota \, \ottsym{/}  \ottnt{F}  \ottsym{]}}%
}{
\ottkw{args} \, \ottsym{(}  \overline{f}  \ottsym{,}  \overline{a}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottsym{H)}  \ottsym{=}  \ottnt{F}  \ottsym{,}  \Gamma''  \ottsym{,}  \ottnt{H''}}{%
{\ottdrulename{Args}}{}%
}}

\newcommand{\ottdefnargsXXis}[1]{\begin{ottdefnblock}[#1]{$\ottkw{args} \, \ottsym{(}  \overline{f}  \ottsym{,}  \overline{a}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottsym{H)}  \ottsym{=}  \ottnt{F}  \ottsym{,}  \Gamma''  \ottsym{,}  \ottnt{H'}$}{}
\ottusedrule{\ottdruleArgs{}}
\end{ottdefnblock}}

%% defn args2_is
\newcommand{\ottdruleArgsOne}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{f_{{\mathrm{0}}}}  \equiv  \mathit{x}  \vee  \ottnt{f_{{\mathrm{0}}}}  \equiv  \mathit{x}  \ottsym{=}  \ottnt{e'}}%
\ottpremise{\ottnt{N}  \equiv  \ottnt{N} \, \mathit{x}  \ottsym{=}  \ottnt{e} \, \ottnt{N''}}%
\ottpremise{\ottsym{args2}  \ottsym{(}  \overline{f}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N'} \, \ottnt{N''}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottnt{F}  \ottsym{,}  \ottnt{H'}}%
\ottpremise{\delta \, \ottkw{fresh}}%
\ottpremise{\ottnt{H''}  \ottsym{=}  \ottnt{H'}  \ottsym{[} \, \delta \, \ottsym{/}  \ottnt{e} \, \Gamma  \ottsym{]}}%
}{
\ottsym{args2}  \ottsym{(}  \ottnt{f_{{\mathrm{0}}}} \, \overline{f}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottnt{F}  \ottsym{[}  \mathit{x}  \ottsym{/}  \delta  \ottsym{]}  \ottsym{,}  \ottnt{H''}}{%
{\ottdrulename{Args1}}{}%
}}


\newcommand{\ottdruleArgsTwo}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{f_{{\mathrm{0}}}}  \equiv  \mathit{x}  \vee  \ottnt{f_{{\mathrm{0}}}}  \equiv  \mathit{x}  \ottsym{=}  \ottnt{e'}}%
\ottpremise{\mathit{x} \, \notin \, \ottnt{N}}%
\ottpremise{\ottsym{args2}  \ottsym{(}  \overline{f}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottnt{F}  \ottsym{,}  \ottnt{H'}}%
\ottpremise{\delta \, \ottkw{fresh}}%
\ottpremise{\ottnt{H''}  \ottsym{=}  \ottnt{H'}  \ottsym{[} \, \delta \, \ottsym{/}  \ottnt{e} \, \Gamma  \ottsym{]}}%
}{
\ottsym{args2}  \ottsym{(}  \ottnt{f_{{\mathrm{0}}}} \, \overline{f}  \ottsym{,}  \ottnt{e} \, \ottnt{P}  \ottsym{,}  \ottnt{N}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottnt{F}  \ottsym{[}  \mathit{x}  \ottsym{/}  \delta  \ottsym{]}  \ottsym{,}  \ottnt{H''}}{%
{\ottdrulename{Args2}}{}%
}}


\newcommand{\ottdruleArgsThree}[1]{\ottdrule[#1]{%
\ottpremise{\ottnt{f_{{\mathrm{0}}}}  \equiv  \mathit{x}  \vee  \ottnt{f_{{\mathrm{0}}}}  \equiv  \mathit{x}  \ottsym{=}  \ottnt{e'}}%
\ottpremise{\ottnt{N}  \equiv  \ottnt{N} \, \mathit{x}  \ottsym{=}  \ottnt{e} \, \ottnt{N''}}%
\ottpremise{\ottsym{args2}  \ottsym{(}  \overline{f}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N'} \, \ottnt{N''}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottnt{F}  \ottsym{,}  \ottnt{H'}}%
\ottpremise{\delta \, \ottkw{fresh}}%
\ottpremise{\ottnt{H''}  \ottsym{=}  \ottnt{H'}  \ottsym{[} \, \delta \, \ottsym{/}  \ottnt{e} \, \Gamma  \ottsym{]}}%
}{
\ottsym{args2}  \ottsym{(}  \mathit{x} \, \overline{f}  \ottsym{,}  \ottsym{[]}  \ottsym{,}  \ottnt{N}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottnt{F}  \ottsym{[}  \mathit{x}  \ottsym{/} \, \bot \, \ottsym{]}  \ottsym{,}  \ottnt{H''}}{%
{\ottdrulename{Args3}}{}%
}}


\newcommand{\ottdruleArgsFour}[1]{\ottdrule[#1]{%
\ottpremise{\mathit{x} \, \notin \, \ottnt{N}}%
\ottpremise{\ottsym{args2}  \ottsym{(}  \overline{f}  \ottsym{,}  \ottsym{[]}  \ottsym{,}  \ottnt{N}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottnt{F}  \ottsym{,}  \ottnt{H'}}%
\ottpremise{\delta \, \ottkw{fresh}}%
\ottpremise{\ottnt{H''}  \ottsym{=}  \ottnt{H'}  \ottsym{[} \, \delta \, \ottsym{/}  \ottnt{e} \, \Gamma'  \ottsym{]}}%
}{
\ottsym{args2}  \ottsym{(}  \mathit{x}  \ottsym{=}  \ottnt{e} \, \overline{f}  \ottsym{,}  \ottsym{[]}  \ottsym{,}  \ottnt{N}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottnt{F}  \ottsym{[}  \mathit{x}  \ottsym{/}  \delta  \ottsym{]}  \ottsym{,}  \ottnt{H''}}{%
{\ottdrulename{Args4}}{}%
}}


\newcommand{\ottdruleArgsFive}[1]{\ottdrule[#1]{%
}{
\ottsym{args2}  \ottsym{(}  \ottsym{[]}  \ottsym{,}  \ottsym{[]}  \ottsym{,}  \ottsym{[]}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottsym{[]}  \ottsym{,}  \ottnt{H''}}{%
{\ottdrulename{Args5}}{}%
}}

\newcommand{\ottdefnargsTwoXXis}[1]{\begin{ottdefnblock}[#1]{$\ottsym{args2}  \ottsym{(}  \overline{f}  \ottsym{,}  \ottnt{P}  \ottsym{,}  \ottnt{N}  \ottsym{,}  \Gamma  \ottsym{,}  \Gamma'  \ottsym{,}  \ottnt{H}  \ottsym{)}  \ottsym{=}  \ottnt{F}  \ottsym{,}  \ottnt{H'}$}{}
\ottusedrule{\ottdruleArgsOne{}}
\ottusedrule{\ottdruleArgsTwo{}}
\ottusedrule{\ottdruleArgsThree{}}
\ottusedrule{\ottdruleArgsFour{}}
\ottusedrule{\ottdruleArgsFive{}}
\end{ottdefnblock}}


\newcommand{\ottdefnsRed}{
\ottdefnreduce{}\ottdefnereduce{}\ottdefngetfun{}\ottdefngetfunXXeq{}\ottdefnsplitXXis{}\ottdefnargsXXis{}\ottdefnargsTwoXXis{}}

\newcommand{\ottdefnss}{
\ottdefnsRed
}

\newcommand{\ottall}{\ottmetavars\\[0pt]
\ottgrammar\\[5.0mm]
\ottdefnss}

